<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Cotas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 30px;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #444;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background: #0077cc;
            color: white;
        }
        tr:nth-child(even) {
            background: #f2f2f2;
        }
        input {
            width: 100%;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background: #0077cc;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005fa3;
        }
        .total {
            margin-top: 15px;
            font-weight: bold;
            font-size: 18px;
            color: #0077cc;
        }
    </style>
</head>
<body>
    <h1>Controle de Cotas</h1>

    <div class="total">Cota Geral: <span id="cotaGeral">R$ 0,00</span></div>

    <table>
        <thead>
            <tr>
                <th>Produto</th>
                <th>Cota (R$)</th>
                <th>Realizado (R$)</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody id="produtos"></tbody>
    </table>

    <div style="margin-top:15px;">
        <button id="adicionar">‚ûï Adicionar Produto</button>
        <button id="salvarDados">üíæ Salvar Dados</button>
        <button id="carregarDados">üìÇ Carregar Dados</button>
        <button id="limparDados">üóëÔ∏è Limpar Dados</button>
    </div>

    <script>
        const produtos = document.getElementById("produtos");
        const cotaGeral = document.getElementById("cotaGeral");

        // Fun√ß√£o para formatar n√∫mero em BRL
        function formatBRL(valor) {
            return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // Converter texto R$ para n√∫mero
        function parseBRL(valor) {
            if (!valor) return 0;
            return parseFloat(valor.replace(/[^\d,-]/g, '').replace(',', '.')) || 0;
        }

        // Atualizar total
        function atualizarTotal() {
            let total = 0;
            document.querySelectorAll(".cota").forEach(campo => {
                total += parseBRL(campo.value);
            });
            cotaGeral.textContent = formatBRL(total);
        }

        // Adicionar linha
        document.getElementById("adicionar").addEventListener("click", () => {
            const linha = document.createElement("tr");
            linha.innerHTML = `
                <td><input type="text" placeholder="Produto"></td>
                <td><input type="text" class="cota" placeholder="0,00"></td>
                <td><input type="text" class="realizado" placeholder="0,00"></td>
                <td><button class="remover">‚ùå</button></td>
            `;
            produtos.appendChild(linha);

            // Eventos
            linha.querySelector(".cota").addEventListener("input", atualizarTotal);
            linha.querySelector(".remover").addEventListener("click", () => {
                linha.remove();
                atualizarTotal();
            });
        });

        // Salvar localmente
        document.getElementById("salvarDados").addEventListener("click", () => {
            const lista = [];
            produtos.querySelectorAll("tr").forEach(linha => {
                const nome = linha.querySelector("input[type='text']").value;
                const cota = linha.querySelector(".cota")?.value || "";
                const realizado = linha.querySelector(".realizado")?.value || "";
                lista.push({ nome, cota, realizado });
            });

            localStorage.setItem("produtos", JSON.stringify(lista));
            alert("‚úÖ Dados salvos localmente!");
        });

        // Carregar dados salvos
        document.getElementById("carregarDados").addEventListener("click", () => {
            carregarDados();
            alert("üìÇ Dados carregados!");
        });

        // Limpar dados
        document.getElementById("limparDados").addEventListener("click", () => {
            if (confirm("Tem certeza que deseja apagar todos os dados?")) {
                localStorage.removeItem("produtos");
                produtos.innerHTML = "";
                atualizarTotal();
                alert("üóëÔ∏è Dados apagados!");
            }
        });

        // Fun√ß√£o para carregar produtos
        function carregarDados() {
            const lista = JSON.parse(localStorage.getItem("produtos")) || [];
            produtos.innerHTML = "";

            lista.forEach(item => {
                const linha = document.createElement("tr");
                linha.innerHTML = `
                    <td><input type="text" value="${item.nome}" /></td>
                    <td><input type="text" class="cota" value="${item.cota}" /></td>
                    <td><input type="text" class="realizado" value="${item.realizado}" /></td>
                    <td><button class="remover">‚ùå</button></td>
                `;
                produtos.appendChild(linha);

                linha.querySelector(".cota").addEventListener("input", atualizarTotal);
                linha.querySelector(".remover").addEventListener("click", () => {
                    linha.remove();
                    atualizarTotal();
                });
            });

            atualizarTotal();
        }

        // Carregar automaticamente ao abrir
        window.addEventListener("load", carregarDados);
    </script>
</body>
</html>
